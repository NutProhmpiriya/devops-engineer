
# Processes and Signals in Linux

## **1. Processes (กระบวนการ)**

### **กระบวนการคืออะไร?**
- กระบวนการ (Process) คือโปรแกรมที่กำลังทำงานในระบบปฏิบัติการ
- แต่ละกระบวนการมี **PID** (Process ID) ซึ่งเป็นหมายเลขที่ไม่ซ้ำกัน
- กระบวนการสามารถสร้างกระบวนการลูก (child process) ได้

### **ประเภทของกระบวนการ**
1. **Foreground Process**: กระบวนการที่ผู้ใช้เรียกใช้และรอผลลัพธ์ เช่น การรันโปรแกรม `ls`
2. **Background Process**: กระบวนการที่รันอยู่เบื้องหลัง เช่น การทำงานของเซิร์ฟเวอร์

### **คำสั่งที่เกี่ยวข้องกับกระบวนการ**
1. **ดูรายการกระบวนการ**
   ```bash
   ps aux          # แสดงรายการกระบวนการทั้งหมด
   top             # ดูกระบวนการแบบเรียลไทม์
   htop            # คล้าย top แต่มี UI ที่ใช้ง่ายกว่า
   ```

2. **ค้นหากระบวนการ**
   ```bash
   pgrep process_name
   ```

3. **หยุด/ยกเลิกกระบวนการ**
   - หยุดกระบวนการชั่วคราว:
     ```bash
     kill -STOP PID
     ```
   - ปลุกกระบวนการ:
     ```bash
     kill -CONT PID
     ```
   - ยุติกระบวนการ:
     ```bash
     kill -9 PID
     ```

4. **การรันกระบวนการใน Background**
   ```bash
   command &
   jobs            # ดูรายการงานที่รันใน Background
   fg %1           # นำกระบวนการกลับมารันใน Foreground
   bg %1           # ส่งกระบวนการกลับไป Background
   ```

---

## **2. Signals (สัญญาณ)**

### **สัญญาณคืออะไร?**
- **Signal** เป็นกลไกที่ใช้ส่งข้อมูลไปยังกระบวนการเพื่อแจ้งหรือสั่งการ เช่น หยุด, ยุติ, หรือรีสตาร์ทกระบวนการ

### **ตัวอย่าง Signals ที่สำคัญ**
| Signal | หมายเลข | คำอธิบาย                          |
|--------|---------|------------------------------------|
| `SIGHUP` | 1       | บอกกระบวนการให้โหลดการตั้งค่าใหม่ |
| `SIGINT` | 2       | หยุดกระบวนการ (เช่น กด `Ctrl+C`)  |
| `SIGQUIT`| 3       | หยุดกระบวนการและสร้าง core dump |
| `SIGKILL`| 9       | ยุติกระบวนการทันที (force kill) |
| `SIGTERM`| 15      | ขอให้ยุติกระบวนการอย่างสุภาพ     |
| `SIGSTOP`| 19      | หยุดกระบวนการชั่วคราว           |
| `SIGCONT`| 18      | ปลุกกระบวนการที่หยุด            |

### **การส่ง Signal**
1. ส่ง Signal ไปยังกระบวนการด้วย `kill`:
   ```bash
   kill -SIGNAL PID
   kill -9 1234      # ใช้ SIGKILL เพื่อยุติกระบวนการ 1234
   ```

2. ส่ง Signal ด้วยชื่อ:
   ```bash
   kill -SIGTERM PID
   ```

3. ส่ง Signal ไปยังกลุ่มกระบวนการ:
   ```bash
   kill -9 -PID
   ```

4. ส่ง Signal โดยใช้ `pkill`:
   ```bash
   pkill process_name
   pkill -9 process_name
   ```

---

## **3. Monitoring and Debugging Processes**
1. **strace**: ดูการเรียก system call ของกระบวนการ
   ```bash
   strace -p PID
   ```

2. **lsof**: แสดงไฟล์ที่เปิดโดยกระบวนการ
   ```bash
   lsof -p PID
   ```

3. **nice/renice**: ปรับลำดับความสำคัญของกระบวนการ
   ```bash
   nice -n 10 command   # รันกระบวนการด้วยความสำคัญต่ำ
   renice -n 5 -p PID   # ปรับลำดับความสำคัญของกระบวนการที่กำลังรัน
   ```

---

## **4. Special Process IDs**
- **PID 1**: กระบวนการเริ่มต้นของระบบ (systemd หรือ init)
- **PID 0**: กระบวนการเคอร์เนล
- **PID > 1**: กระบวนการอื่น ๆ ที่สร้างโดยระบบ

---

## สรุป
การจัดการกระบวนการและสัญญาณใน Linux เป็นส่วนสำคัญของการดูแลระบบและการเขียนโปรแกรม การรู้จักคำสั่งและวิธีการใช้งานอย่างถูกต้องจะช่วยให้สามารถจัดการและแก้ปัญหาในระบบได้อย่างมีประสิทธิภาพ!
